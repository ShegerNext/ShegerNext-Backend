// Prisma schema for ShegerNext-Backend
// Defines Profile and Complaint models

datasource db {
    provider  = "postgresql"
    url       = env("DATABASE_URL")
    directUrl = env("DIRECT_DATABASE_URL")
}

generator client {
    provider = "prisma-client-js"
}

model Profile {
    id                 String      @id @default(uuid())
    full_name          String?
    first_name         String
    phone_number       String?
    role               String      @default("citizen")
    preferred_language String      @default("en")
    created_at         DateTime    @default(now())
    complaints         Complaint[]
}

model Complaint {
    id                 String   @id @default(uuid())
    clerk_user_id      String? // keep optional, but remove relation
    text               String
    category           String?
    location_latitude  Float?
    location_longitude Float?
    image_url          String?
    status             String   @default("submitted")
    created_at         DateTime @default(now())
    Profile            Profile? @relation(fields: [profileId], references: [id])
    profileId          String?
}

model User {
    id        String   @id @default(uuid())
    username  String   @unique
    fan       String   @unique // national id number
    password  String
    createdAt DateTime @default(now())
}
